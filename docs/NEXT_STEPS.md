# –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î:**
   - searchComicsByField() - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω N+1 –≤ genres/page.tsx (100+ ‚Üí 2 –∑–∞–ø—Ä–æ—Å–∞)
   - COUNT(*) OVER() –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö COUNT –∑–∞–ø—Ä–æ—Å–æ–≤

2. **UI/UX —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
   - –£–±—Ä–∞–Ω—ã –≤—Å–µ hardcoded —Ü–≤–µ—Ç–∞ (100%)
   - –°–æ–∑–¥ –∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ utility –∫–ª–∞—Å—Å–æ–≤ (.list-item, .table-body, .btn-primary –∏ —Ç.–¥.)
   - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –≤–æ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –≥–∞–π–¥—ã –≤ /docs
   - SQL –¥–ª—è FULLTEXT –∏–Ω–¥–µ–∫—Å–æ–≤ –≥–æ—Ç–æ–≤

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–æ—Ç–ª–æ–∂–µ–Ω–æ - —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ search/page.tsx (1224 —Å—Ç—Ä–æ–∫–∏)

**–†–∏—Å–∫–∏:**
- –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FIND_IN_SET()
- –ù–æ–≤–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LIKE (–±—É–¥–µ—Ç MATCH AGAINST –ø–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–æ–≤)
- –ú–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞

**–ü–ª–∞–Ω:**
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Ç–µ–∫—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π PR —Å –∑–∞–º–µ–Ω–æ–π –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ production –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**–î–æ–∫—É–º–µ–Ω—Ç:** [SEARCH_PAGE_REFACTOR.md](./SEARCH_PAGE_REFACTOR.md)

### 2. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∫–ª–∞–¥–æ–∫ –ø–æ–∏—Å–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö 5 –≤–∫–ª–∞–¥–æ–∫ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å—Ä–∞–∑—É
- 25-50 —Å–µ–∫—É–Ω–¥ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

**–†–µ—à–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è):**
```typescript
// –°–æ–∑–¥–∞—Ç—å API routes:
app/api/search/
  characters/route.ts
  creators/route.ts
  teams/route.ts
  scanlators/route.ts

// Client component –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É:
'use client'
const { data } = useQuery({
  queryKey: ['search', currentTab, query],
  queryFn: () => fetch(`/api/search/${currentTab}?q=${query}`).then(r => r.json()),
  enabled: currentTab === 'characters' // –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
})
```

**–≠—Ñ—Ñ–µ–∫—Ç:** 25-50 —Å–µ–∫ ‚Üí 5-10 —Å–µ–∫ (–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ 1 –≤–∫–ª–∞–¥–∫–∏)

**–†–∏—Å–∫–∏:**
- –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏
- Client-side –≤–º–µ—Å—Ç–æ SSR (—Ö—É–∂–µ SEO)

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1. **–î–æ–±–∞–≤–∏—Ç—å FULLTEXT –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î**
   ```sql
   ALTER TABLE cdb_comics ADD FULLTEXT INDEX ft_characters (characters);
   ALTER TABLE cdb_comics ADD FULLTEXT INDEX ft_creators (creators);
   ALTER TABLE cdb_comics ADD FULLTEXT INDEX ft_teams (teams);
   ALTER TABLE cdb_comics ADD FULLTEXT INDEX ft_translate (translate);
   ALTER TABLE cdb_comics ADD FULLTEXT INDEX ft_edit (edit);
   ```
   **–≠—Ñ—Ñ–µ–∫—Ç:** 10-50x —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ JOIN –∫–æ–ª–æ–Ω–∫–∞—Ö**
   ```sql
   SHOW INDEX FROM cdb_series;
   SHOW INDEX FROM cdb_comics;

   -- –î–æ–±–∞–≤–∏—Ç—å –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:
   CREATE INDEX idx_series_publisher ON cdb_series(publisher);
   CREATE INDEX idx_comics_serie ON cdb_comics(serie);
   ```

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

3. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @tanstack/react-virtual
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ weeks/[weekRange]/page.tsx (500-1000+ –∫–æ–º–∏–∫—Å–æ–≤)
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ ComicsListView —Å >100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

4. **Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ Header**
   ```typescript
   // components/Header.tsx
   import { useDebounce } from '@/hooks/useDebounce'

   const debouncedQuery = useDebounce(query, 300)
   useEffect(() => {
     if (debouncedQuery) {
       router.push(`/search?q=${debouncedQuery}`)
     }
   }, [debouncedQuery])
   ```

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

5. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å .grid-cards –≤–µ–∑–¥–µ**
   - –ù–∞–π—Ç–∏ –≤—Å–µ `grid grid-cols-2 sm:grid-cols-3...`
   - –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `.grid-cards`

6. **–°–æ–∑–¥–∞—Ç—å Skeleton –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ loading states
   - –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö —Å–∫–µ–ª–µ—Ç–æ–Ω–æ–≤

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-------------|-----------|-----------|
| FULLTEXT –∏–Ω–¥–µ–∫—Å—ã | 10-50x | –ù–∏–∑–∫–∞—è (SQL) |
| –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∫–ª–∞–¥–æ–∫ | 5x | –í—ã—Å–æ–∫–∞—è (–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ) |
| –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ | 2-5x | –°—Ä–µ–¥–Ω—è—è |
| Debounce –ø–æ–∏—Å–∫–∞ | UX | –ù–∏–∑–∫–∞—è |

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã:
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω
- ‚úÖ TypeScript –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ –ö–æ–º–º–∏—Ç—ã: `71200b3`, `3b355b5`
- ‚úÖ Vercel –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∑–∞–ø—É—â–µ–Ω
