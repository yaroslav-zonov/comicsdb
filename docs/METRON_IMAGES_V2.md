# üñºÔ∏è –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Metron (v2)

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: JSON —Ñ–∞–π–ª —Å –¥–µ—Å—è—Ç–∫–∞–º–∏ —Ç—ã—Å—è—á –∑–∞–ø–∏—Å–µ–π –±—É–¥–µ—Ç —Ç—è–∂–µ–ª—ã–º (–Ω–µ—Å–∫–æ–ª—å–∫–æ MB)
2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API**: Metron –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ 30 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω –∏ 10000/–¥–µ–Ω—å
3. **–ü—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –ù–µ–ª—å–∑—è –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é —Å Metron –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

## –ù–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

1. **–õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
2. **–õ–µ–≥–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**: –í JSON —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ ComicVine ID, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∫—ç—à
3. **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —É—á–µ—Ç–æ–º –ª–∏–º–∏—Ç–æ–≤ API
4. **–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫—ç—à–∞ - O(1) —á–µ—Ä–µ–∑ Set

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
public/
  images/
    metron/
      thumb/
        4050-12345.jpg
        4050-67890.jpg
      tiny/
        4050-12345.jpg
      small/
        4050-12345.jpg
      super/
        4050-12345.jpg

data/
  metron-cache-index.json  # –õ–µ–≥–∫–∏–π —Ñ–∞–π–ª: —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ ID
```

### –§–æ—Ä–º–∞—Ç –∏–Ω–¥–µ–∫—Å–∞

```json
{
  "version": "1.0.0",
  "lastUpdated": "2025-12-17",
  "cachedIds": [
    "4050-12345",
    "4050-67890"
  ]
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û—á–µ–Ω—å –ª–µ–≥–∫–∏–π —Ñ–∞–π–ª (–¥–µ—Å—è—Ç–∫–∏ —Ç—ã—Å—è—á ID = ~500KB)
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Set
- –ù–µ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å URL

## –õ–∏–º–∏—Ç—ã API Metron

- **30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É** = 1 –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
- **10000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å** = ~416 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å = ~7 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (—Å –∑–∞–ø–∞—Å–æ–º)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:**
- –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏: 2.5 —Å–µ–∫—É–Ω–¥—ã (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø–∞—Å)
- –ú–∞–∫—Å–∏–º—É–º –≤ –¥–µ–Ω—å: 9000 –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å –∑–∞–ø–∞—Å–æ–º)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–º–∏–∫—Å—ã

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫—ç—à–∞

```typescript
import { hasMetronCache } from '@/lib/metron-images'

if (hasMetronCache(comic.comicvine)) {
  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  const url = `/images/metron/thumb/${comic.comicvine}.jpg`
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–º–µ–Ω–∞

```typescript
import { getImageUrl } from '@/lib/utils'

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à, –µ—Å–ª–∏ –µ—Å—Ç—å
const url = getImageUrl(comic.thumb, comic.comicvine, 'thumb')
```

## –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–ø–∏—Å–∫–∞ ComicVine ID
npx tsx scripts/download-metron-images.ts --ids "4050-12345,4050-67890"

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–æ–º–∏–∫—Å–æ–≤ (–∏–∑ –ë–î)
npx tsx scripts/download-metron-images.ts --popular 1000

# –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É (—Å —É—á–µ—Ç–æ–º –ª–∏–º–∏—Ç–æ–≤)
npx tsx scripts/download-metron-images.ts --continue
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

- **–ò–Ω–¥–µ–∫—Å**: ~500KB –¥–ª—è 100,000 ID (—Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫)
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: ~50-100MB –¥–ª—è 1000 –∫–æ–º–∏–∫—Å–æ–≤ (4 —Ä–∞–∑–º–µ—Ä–∞ √ó ~25KB)
- **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞**: <10ms (–ª–µ–≥–∫–∏–π JSON)

### –°–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞

- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫—ç—à–∞**: O(1) —á–µ—Ä–µ–∑ Set
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL**: O(1) - –ø—Ä–æ—Å—Ç–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫–∏
- **–ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API**: –í—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ**: ~50-100MB –Ω–∞ 1000 –∫–æ–º–∏–∫—Å–æ–≤
2. **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**: –° —É—á–µ—Ç–æ–º –ª–∏–º–∏—Ç–æ–≤ API, 1000 –∫–æ–º–∏–∫—Å–æ–≤ = ~42 —á–∞—Å–∞
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ù—É–∂–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–∏–∫—Å–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–Ω–∞—á–∞–ª–∞ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–º–∏–∫—Å—ã
2. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ 100-200 –∫–æ–º–∏–∫—Å–æ–≤ –≤ –¥–µ–Ω—å
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ API
4. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –•—Ä–∞–Ω–∏—Ç—å –∫—ç—à –≤ git LFS –∏–ª–∏ –Ω–∞ CDN

