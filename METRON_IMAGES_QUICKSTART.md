# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ü–æ–¥–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Metron

## –ß—Ç–æ —ç—Ç–æ?

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–º–µ–Ω—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å ComicVine –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å Metron –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±–ª–æ–∂–µ–∫.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è ComicVine ID ‚Üí Metron URL —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `data/metron-images.json`
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–º–µ–Ω–∞**: –§—É–Ω–∫—Ü–∏—è `getImageUrl` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–º–µ–Ω—è–µ—Ç URL, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `comicvineId`
3. **Fallback**: –ï—Å–ª–∏ Metron URL –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π ComicVine URL

## –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤—Ä—É—á–Ω—É—é

–û—Ç–∫—Ä–æ–π—Ç–µ `data/metron-images.json` –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å:

```json
{
  "mappings": {
    "4050-12345": {
      "thumb": "https://metron.cloud/media/image/thumb/12345.jpg",
      "tiny": "https://metron.cloud/media/image/tiny/12345.jpg",
      "small": "https://metron.cloud/media/image/small/12345.jpg",
      "super": "https://metron.cloud/media/image/super/12345.jpg"
    }
  }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

–ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–π—Ç–µ `comicvineId` –≤ —Ñ—É–Ω–∫—Ü–∏—é `getImageUrl`:

```typescript
// –ë—ã–ª–æ:
const url = getImageUrl(comic.thumb)

// –°—Ç–∞–ª–æ (—Å –ø–æ–¥–º–µ–Ω–æ–π –Ω–∞ Metron):
const url = getImageUrl(comic.thumb, comic.comicvine, 'thumb')
```

### –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
npx tsx scripts/update-metron-images.ts --stats

# –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
npx tsx scripts/update-metron-images.ts --add "4050-12345:https://metron.cloud/media/image/thumb/12345.jpg"

# –£–¥–∞–ª–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
npx tsx scripts/update-metron-images.ts --remove "4050-12345"
```

## –ì–¥–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥?

–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã `getImageUrl`, –¥–æ–±–∞–≤–∏–≤ `comicvineId`:

- ‚úÖ `components/ComicCard.tsx` - —É–∂–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ `components/TableRow.tsx` - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `comicvineId`
- ‚úÖ `app/publishers/[publisherId]/[seriesId]/[comicId]/page.tsx` - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `comicvineId`
- ‚úÖ `lib/search-queries.ts` - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `comicvineId`
- ‚úÖ –ò –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `getImageUrl`

## –ü—Ä–∏–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞

**–î–æ:**
```typescript
const thumb = getImageUrl(comic.thumb)
```

**–ü–æ—Å–ª–µ:**
```typescript
const thumb = getImageUrl(comic.thumb, comic.comicvine, 'thumb')
```

## –§–æ—Ä–º–∞—Ç ComicVine ID

ComicVine ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –∫–∞–∫ –æ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î:
- –û–±—ã—á–Ω–æ —ç—Ç–æ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `4050-12345`)
- –í JSON —Ñ–∞–π–ª–µ –≤—Å–µ–≥–¥–∞ —Å—Ç—Ä–æ–∫–∞: `"4050-12345"`

## –†–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- **thumb** - –º–∞–ª–µ–Ω—å–∫–æ–µ (–¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫, —Å–ø–∏—Å–∫–æ–≤)
- **tiny** - –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–æ–µ (fallback)
- **small** - —Å—Ä–µ–¥–Ω–µ–µ
- **super** - –±–æ–ª—å—à–æ–µ (–¥–ª—è –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–º–∏–∫—Å–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –≤ DevTools
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å `metron.cloud`

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/METRON_IMAGES.md](docs/METRON_IMAGES.md)

