# üéØ –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Metron

## –ì–ª–∞–≤–Ω–æ–µ

**–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Vercel KV (Redis), –∞ –ù–ï –≤ —Ñ–∞–π–ª–µ –Ω–∞ GitHub!**

–§–∞–π–ª `data/metron-cache-index.json` –Ω–∞ GitHub - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –û–Ω **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–º–∏–∫—Å–∞

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /publishers/123/456/789
```

### 2. –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

- **–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç** (`/a/uploads/`) ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å ‚úÖ
- **–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç** (`api/image/`) ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º Metron

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞

```
–°–µ—Ä–≤–µ—Ä ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Vercel KV (–∏–ª–∏ –ø–∞–º—è—Ç—å):
  ‚îú‚îÄ –ù–∞–π–¥–µ–Ω–æ –≤ –∫—ç—à–µ ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Metron URL ‚úÖ
  ‚îî‚îÄ –ù–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –ó–∞–ø—Ä–æ—Å –∫ Metron API ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ KV ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç
```

### 4. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Vercel KV

```
Vercel KV (Redis):
{
  "4050-12345": "https://static.metron.cloud/...",
  "4050-67890": "https://static.metron.cloud/..."
}
```

**–ù–ï –≤ —Ñ–∞–π–ª!** –í Vercel KV (Redis –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö).

## –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ?

### –ù–∞ Vercel (production)

1. **–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Vercel KV:**
   - ‚úÖ –î–∞–Ω–Ω—ã–µ –≤ Redis (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
   - ‚úÖ –û–±—â–∏–π –∫—ç—à –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

2. **–ï—Å–ª–∏ KV –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - ‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ (in-memory –∫—ç—à)
   - ‚ö†Ô∏è –¢–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
   - ‚ö†Ô∏è –ù–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- ‚úÖ –î–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ (in-memory –∫—ç—à)
- ‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ü—Ä–æ —Ñ–∞–π–ª –Ω–∞ GitHub

**–§–∞–π–ª `data/metron-cache-index.json` –Ω–∞ GitHub:**
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å - —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

**–ü–æ—á–µ–º—É –æ–Ω —Ç–∞–º?**
- –î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ù–æ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ - Vercel KV

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel KV (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å KV –≤ Vercel

```bash
vercel kv create
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Vercel Dashboard:
1. Settings ‚Üí Storage ‚Üí Create Database
2. –í—ã–±–µ—Ä–∏—Ç–µ KV
3. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É

### –®–∞–≥ 2: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç:
- `KV_REST_API_URL`
- `KV_REST_API_TOKEN`
- `KV_REST_API_READ_ONLY_TOKEN`

### –®–∞–≥ 3: –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç KV –≤–º–µ—Å—Ç–æ –ø–∞–º—è—Ç–∏.

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

### 1. –ß–µ—Ä–µ–∑ API

```
http://localhost:3000/api/metron/status
```

–ü–æ–∫–∞–∂–µ—Ç:
- –°–∫–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–Ω–æ –≤ Metron
- –°–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ
- –ö–∞–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (KV –∏–ª–∏ Memory)

### 2. –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
npx tsx scripts/check-metron-status.ts
```

### 3. –ß–µ—Ä–µ–∑ –ª–æ–≥–∏

–í –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞:
```
üîç [Metron] –ü—Ä–æ–≤–µ—Ä—è—é ComicVine ID: 4050-12345
‚úÖ [Metron] –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è 4050-12345: https://static.metron.cloud/...
```

## –ò—Ç–æ–≥–æ

‚úÖ **–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Vercel KV** (Redis)  
‚úÖ **–§–∞–π–ª –Ω–∞ GitHub –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ **–ö—ç—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ (–µ—Å–ª–∏ KV –Ω–∞—Å—Ç—Ä–æ–µ–Ω)  
‚úÖ **–ù–µ –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ API** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à

## –í–æ–ø—Ä–æ—Å—ã

**Q: –ó–∞—á–µ–º —Ñ–∞–π–ª –Ω–∞ GitHub?**  
A: –û–Ω –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã. –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**Q: –ö–∞–∫ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è?**  
A: –í Vercel KV (Redis). –ï—Å–ª–∏ KV –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω - –≤ –ø–∞–º—è—Ç–∏ (–Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ).

**Q: –ù—É–∂–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å KV?**  
A: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ –Ω–µ–≥–æ (–≤ –ø–∞–º—è—Ç–∏).

